# because of stoage issue so change from lab406 to smarthome
# 測試全部採用本機空間
# 實驗室版本（亮點計畫採用高頻寬與高速硬碟) 更適用longhorn
# 目前採用nfs (因為網速不均勻且速度一般)
expose: 
  type: "ingress"
  tls:
    enabled: true
    # secret: read the tls certificate from the specified secret. The tls certificate can be generated by cert manager
    certSource: secret
    secret:
      secretName: harbor-tls
      notarySecretName: notary-tls
  ingress:
    hosts: 
      core: "reg.406.csie.nuu.edu.tw"
      notary: "not.406.csie.nuu.edu.tw"
    controller: "default"
    annotations:
      kubernetes.io/ingress.class: "nginx"
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
internalTLS:
  enabled: false
persistence:
  enabled: true
  resourcePolicy: "keep"
  # 設定為可跨空間備份的儲存空間
  persistentVolumeClaim:
    registry:
      storageClass: gclee-nfs-storage
      size: 10Gi
    chartmuseum:
      storageClass: gclee-nfs-storage
      size: 10Gi
    jobservice:
      storageClass: gclee-nfs-storage
      size: 2Gi
    database:
      storageClass: gclee-nfs-storage
      size: 2Gi
    redis:
      storageClass: gclee-nfs-storage
      size: 2Gi
externalURL: "https://reg.406.csie.nuu.edu.tw"
logLevel: info
harborAdminPassword: "nuuCSIE406"
# The key used for encryption. Must be a string of 16 chars
secretKey: "harbor406csienuu"
# 關閉因為會因為儲存空間問題失敗(lonhorn)
trivy:
  enabled: true
notary:
  enabled: true
# 此版本已測試通過https正確憑證與部屬(2020/01/03)

# 外部資料庫範例, 詳細參考其他專案
database:
  type: internal
  internal:
    password: nuuCSIE406
redis:
  type: internal

# 開啟與關閉設定+部屬數量管理
metrics:
  enabled: true
chartmuseum:
  enabled: true
clair:
  replicas: 2
registry:
  replicas: 2
portal:
  replicas: 3
jobservice:
  replicas: 2
core:
  replicas: 2
  ## Startup probe values
  startupProbe:
    enabled: true
    initialDelaySeconds: 20
exporter:
    replicas: 2
    cacheDuration: 30
    cacheCleanInterval: 14400