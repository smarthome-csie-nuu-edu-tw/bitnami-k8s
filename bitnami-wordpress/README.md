## 
https://artifacthub.io/packages/helm/bitnami/wordpress/9.8.2

## helm install mc2019
kubectl create ns wp-mc2019
helm3 install wp-mc2019 -n wp-mc2019 bitnami/wordpress -f ./wp-mc2019.yaml --version 10.10.3

## 安裝過程都可以在網頁上面處理!
目前有四台主機伺服器協助系統(2021/04/05)，可以持續無限擴增，來源可以是實驗室或是機房的主機
* 406實驗室: 120.105.129.176, 120.105.129.178
* 機房: 120.105.128.201, 120.105.128.222 
-> UI監控管理: https://rancher.406.csie.nuu.edu.tw
## 操作網頁以後會看到APP的ICON，之後的網站與資料庫他都會按照編寫的設定去部屬到伺服器(剩下的就是等待就可以)

## 系網轉移說明
系網資訊
Wordpress版本固定: 5.5.3 -> 對應chart版本10.0.8 APP: 5.5.3

1. 模擬系網架設(wp-csie-406.yaml檔案)
  * 模擬系網的網址名稱: www.csie.wp.406.csie.nuu.edu.tw, csie.wp.406.csie.nuu.edu.tw
  * 在UI上看到他自動在機房的222與201兩台主機伺服器上架設起來模擬的系網，所以以後可以兩台間任何一台死掉都可以活著
  * 要增加穩定性的話可以架設更多的系網(三台是最穩)但是因為目前的只有兩台伺服器是有超過兩個核心的(機房)，406實驗室的都是單核心(電腦教室淘汰的XD)，所以設定2而已。
  * 包含憑證都會自動安全性申請
2. 真實系網轉移與架設
  * 確認DNS的轉移是否正常
  ```
  nslookup csie.nuu.edu.tw 8.8.8.8
  nslookup www.csie.nuu.edu.tw 8.8.8.8
  ```
  * 轉移正常後開始編寫部屬文件


3. 轉移教學(全部都是網頁上設定)
  * 先進去系網然後備份現有的資料
  * 下載備份的資料
  * 進去要轉移的新系網
  * 上傳備份並套用


#### 備註
```
聯合大學 系網搬遷(簡易版本)

系網我這裡可用的密碼過期，所以我就拿之前下載的XD
等待上傳舊的系網備份
我這裡網路很慢.....如果是在學校內上傳的話速度放心不會這麼慢.......哈
按照這個速度要傳幾個小時吧 哈 那就.....慢慢等
所以一定要確定是在網路很快的地方處理......
所以我現在遠端回去學校用學校的上傳備份

上傳完成 現在就是還原，還原完網站就100%OK了

所以建立到轉移系網可以全部100%都在網頁上面操作即可
``` 
```
更改系網DNS

www.csie.nuu.edu.tw 和 csie.nuu.edu.tw 
從120.105.128.202轉換到ha.k8s.csie.nuu.edu.tw(<-因為這個是很多IP伺服器的代表)

更改後會有一段時間無法運作，等待DNS更改生效後才可以部屬(因為憑證更新問題)

這樣就安裝完系網的系統(wordpress)+憑證，剩下的就是備份轉移，他會自動在兩台主機上進行部屬(所以可以任何一台掛掉網站還會正常)

剛剛他還會連回舊的是因為還有DNS記錄在我這裡的路由器暫存，所以他會連回舊的，遠端過去的那台也是XDDDD，用我這裡上傳的速度太慢.....所以晚點遠端的防火牆更新DNS以後我再繼續錄下一段

OK 這樣就完成轉移到新系網了(從架設到轉移全部都僅需要網頁上面操作)

```
